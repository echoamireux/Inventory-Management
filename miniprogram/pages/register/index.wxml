<view class="container flex-center bg-white h-screen">
  <view class="p-30 w-full">
    <view class="text-center mb-40">
      <view class="text-3xl font-bold mb-10 text-dark">身份绑定</view>
      <view class="text-sm text-secondary">首次使用请绑定真实姓名，用于库存操作追溯</view>
    </view>

    <view class="mb-30">
      <van-cell-group inset custom-class="!bg-transparent">
        <!-- 姓名 -->
        <van-field
          value="{{ name }}"
          label="真实姓名"
          placeholder="请输入您的真实姓名"
          border="{{ false }}"
          bind:change="onNameInput"
          custom-style="background-color: #f7f8fa; border-radius: 8px; padding: 15px; margin-bottom: 12px;"
        />

        <!-- 手机号 (选填) -->
        <van-field
          value="{{ mobile }}"
          label="手机号"
          placeholder="选填，用于紧急联系"
          type="number"
          maxlength="11"
          border="{{ false }}"
          bind:change="onMobileInput"
          custom-style="background-color: #f7f8fa; border-radius: 8px; padding: 15px; margin-bottom: 12px;"
        />

        <!-- 部门 (下拉选择) -->
        <van-cell
          title="所属部门"
          value="{{ department || '请选择' }}"
          is-link
          border="{{ false }}"
          bind:click="showDeptPopup"
          custom-style="background-color: #f7f8fa; border-radius: 8px; padding: 15px; align-items: center;"
          title-class="flex-none"
        />
      </van-cell-group>
    </view>

    <!-- 部门选择弹窗 -->
    <van-popup show="{{ showDept }}" position="bottom" round bind:close="onCloseDept">
      <van-picker
        show-toolbar
        title="选择部门"
        columns="{{ deptColumns }}"
        bind:cancel="onCloseDept"
        bind:confirm="onConfirmDept"
      />
    </van-popup>

    <view class="px-20">
      <van-button
        type="primary"
        block
        round
        size="large"
        bind:click="onSubmit"
        loading="{{ loading }}"
        loading-text="注册中..."
      >
        提交申请
      </van-button>
    </view>
  </view>
</view>
