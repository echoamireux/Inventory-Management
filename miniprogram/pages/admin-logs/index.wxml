<!--pages/admin-logs/index.wxml-->
<!-- 审计日志页面 - 使用统一日志组件 + 筛选功能 -->
<view class="page-container">
  <!-- 搜索栏 -->
  <van-search
    value="{{ searchVal }}"
    placeholder="搜索操作人 / 物料名称 / 代码"
    bind:search="onSearch"
    bind:change="onSearchChange"
    bind:clear="onClear"
    background="#f7f8fa"
  />

  <!-- 筛选器 -->
  <van-dropdown-menu active-color="#1989fa">
    <van-dropdown-item value="{{ dateFilter }}" options="{{ dateOptions }}" bind:change="onDateFilterChange" />
    <van-dropdown-item value="{{ typeFilter }}" options="{{ typeOptions }}" bind:change="onTypeFilterChange" />
    <van-dropdown-item value="{{ operatorFilter }}" options="{{ operatorOptions }}" bind:change="onOperatorFilterChange" />
  </van-dropdown-menu>

  <!-- 日志列表 -->
  <view class="list-container">
    <block wx:for="{{ list }}" wx:key="_id">
      <log-item
        item="{{ item }}"
        mode="full"
        bind:longpress="onLongPressItem"
      />
    </block>

    <van-empty wx:if="{{ !loading && list.length === 0 }}" description="暂无记录" />

    <view wx:if="{{ loading }}" class="loading-container">
      <van-loading size="24px">加载中...</van-loading>
    </view>

    <view wx:if="{{ isEnd && list.length > 0 }}" class="end-text">
      - 已无更多 -
    </view>
  </view>
</view>
