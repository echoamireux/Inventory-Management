<!--pages/material-edit/index.wxml-->
<!-- 移库页面 - 优化设计 -->
<view class="container p-3">
  <!-- 物料信息卡片（只读，紧凑） -->
  <view class="info-card">
    <view class="info-card-row">
      <text class="info-code">{{ form.product_code || form.material_name }}</text>
      <text class="info-batch">批号: {{ form.batch_number }}</text>
    </view>
    <view class="info-name">{{ form.product_code ? form.material_name : '' }}</view>
    <view class="info-label">#{{ form.unique_code }}</view>
  </view>

  <!-- 存储位置（可编辑） -->
  <view class="form-card">
    <view class="form-title">存储位置</view>

    <van-cell
      title="存储区域"
      value="{{ form.location_zone || '请选择' }}"
      is-link
      bind:click="showLocationSheet"
      required
    />

    <van-field
      value="{{ form.location_detail }}"
      label="详细坐标"
      placeholder="层-列 (如: A-01)"
      data-field="location_detail"
      bind:change="onInput"
    />
  </view>

  <!-- 提交按钮 -->
  <view style="margin-top: 32px; padding: 0 16px;">
    <van-button color="#1989fa" block round loading="{{ loading }}" bind:click="onSubmit">
      确认移库
    </van-button>
  </view>

  <!-- Zone Sheet -->
  <van-action-sheet
    show="{{ showLocationSheet }}"
    actions="{{ locationZoneActions }}"
    bind:close="onLocationClose"
    bind:select="onLocationSelect"
  />
</view>
